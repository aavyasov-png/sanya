# üîß –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ CORS –±–ª–æ–∫–∏—Ä–æ–≤–∫–∏ Uzum API

## –ü—Ä–æ–±–ª–µ–º–∞
–ü—Ä–∏ –ø—Ä—è–º—ã—Ö –∑–∞–ø—Ä–æ—Å–∞—Ö –∫ `api-seller.uzum.uz` –∏–∑ –±—Ä–∞—É–∑–µ—Ä–∞ –≤–æ–∑–Ω–∏–∫–∞–µ—Ç CORS –±–ª–æ–∫–∏—Ä–æ–≤–∫–∞:
```
CORS –±–ª–æ–∫–∏—Ä–æ–≤–∫–∞ –∏–ª–∏ —Å–µ—Ç—å –Ω–µ–¥–æ—Å—Ç—É–ø–Ω–∞. –¢—Ä–µ–±—É–µ—Ç—Å—è backend-–ø—Ä–æ–∫—Å–∏.
```

## ‚úÖ –†–µ—à–µ–Ω–∏–µ: Cloudflare Functions Proxy

–°–æ–∑–¥–∞–Ω–∞ —Å–µ—Ä–≤–µ—Ä–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏—è `/functions/api/uzum-proxy.js`, –∫–æ—Ç–æ—Ä–∞—è:
- –†–∞–±–æ—Ç–∞–µ—Ç –Ω–∞ —Å—Ç–æ—Ä–æ–Ω–µ —Å–µ—Ä–≤–µ—Ä–∞ Cloudflare (–±–µ–∑ CORS)
- –ü—Ä–æ–∫—Å–∏—Ä—É–µ—Ç –≤—Å–µ –∑–∞–ø—Ä–æ—Å—ã –∫ Uzum API
- –î–æ–±–∞–≤–ª—è–µ—Ç –ø—Ä–∞–≤–∏–ª—å–Ω—ã–µ CORS –∑–∞–≥–æ–ª–æ–≤–∫–∏ –¥–ª—è —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥–∞

## üìÅ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ñ–∞–π–ª–æ–≤

```
/functions/
  ‚îî‚îÄ‚îÄ api/
      ‚îî‚îÄ‚îÄ uzum-proxy.js    # Cloudflare Function (serverless)

/src/lib/
  ‚îî‚îÄ‚îÄ uzum-api.ts          # –ö–ª–∏–µ–Ω—Ç API (–æ–±–Ω–æ–≤–ª—ë–Ω –¥–ª—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –ø—Ä–æ–∫—Å–∏)
```

## üîÑ –ö–∞–∫ —ç—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç

### 1. –§—Ä–æ–Ω—Ç–µ–Ω–¥ –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –∑–∞–ø—Ä–æ—Å –∫ –ø—Ä–æ–∫—Å–∏:
```javascript
POST /api/uzum-proxy
{
  "path": "/seller-info",
  "method": "GET",
  "headers": {
    "Authorization": "Bearer YOUR_TOKEN"
  }
}
```

### 2. Cloudflare Function –ø—Ä–æ–∫—Å–∏—Ä—É–µ—Ç –∫ Uzum API:
```
GET https://api-seller.uzum.uz/api/seller-openapi/seller-info
Authorization: Bearer YOUR_TOKEN
```

### 3. –û—Ç–≤–µ—Ç –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç—Å—è —Å CORS –∑–∞–≥–æ–ª–æ–≤–∫–∞–º–∏:
```
Access-Control-Allow-Origin: *
Access-Control-Allow-Methods: GET, POST, PUT, DELETE, OPTIONS
```

## üöÄ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ

–ü–æ —É–º–æ–ª—á–∞–Ω–∏—é –ø—Ä–æ–∫—Å–∏ **–≤–∫–ª—é—á—ë–Ω –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏**. –ö–æ–¥ –≤ `uzum-api.ts` –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç —ç—Ç–æ —á–µ—Ä–µ–∑:

```typescript
const USE_PROXY = import.meta.env.VITE_USE_UZUM_PROXY !== 'false';
```

### –û—Ç–∫–ª—é—á–∏—Ç—å –ø—Ä–æ–∫—Å–∏ (–µ—Å–ª–∏ –Ω—É–∂–Ω–æ):
–î–æ–±–∞–≤—å—Ç–µ –≤ `.env`:
```
VITE_USE_UZUM_PROXY=false
```

## ‚ú® –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞

- ‚úÖ –û–±—Ö–æ–¥–∏—Ç CORS –±–ª–æ–∫–∏—Ä–æ–≤–∫—É
- ‚úÖ –†–∞–±–æ—Ç–∞–µ—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–æ—Å–ª–µ –¥–µ–ø–ª–æ—è
- ‚úÖ Serverless (–±–µ—Å–ø–ª–∞—Ç–Ω–æ –Ω–∞ Cloudflare)
- ‚úÖ –ù–µ —Ç—Ä–µ–±—É–µ—Ç –∏–∑–º–µ–Ω–µ–Ω–∏–π –≤ –∫–æ–¥–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤
- ‚úÖ –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –≤—Å–µ HTTP –º–µ—Ç–æ–¥—ã (GET, POST, PUT, DELETE)
- ‚úÖ –ü–µ—Ä–µ–¥–∞—ë—Ç –≤—Å–µ –∑–∞–≥–æ–ª–æ–≤–∫–∏ –∏ body

## üìù –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–±–æ—Ç—ã

–ü–æ—Å–ª–µ –¥–µ–ø–ª–æ—è –ø—Ä–æ–≤–µ—Ä—å—Ç–µ –≤ DevTools:

**–ë–µ–∑ –ø—Ä–æ–∫—Å–∏ (—Å—Ç–∞—Ä—ã–π —Å–ø–æ—Å–æ–±):**
```
‚ùå Failed to fetch
‚ùå CORS policy blocked
```

**–° –ø—Ä–æ–∫—Å–∏ (–Ω–æ–≤—ã–π —Å–ø–æ—Å–æ–±):**
```
‚úÖ POST /api/uzum-proxy ‚Üí 200 OK
‚úÖ Data: { sellerInfo: {...} }
```

## üîí –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

- –¢–æ–∫–µ–Ω—ã –ø–µ—Ä–µ–¥–∞—é—Ç—Å—è —Ç–æ–ª—å–∫–æ —á–µ—Ä–µ–∑ HTTPS
- –§—É–Ω–∫—Ü–∏—è –ø—Ä–æ–∫—Å–∏—Ä—É–µ—Ç —Ç–æ–ª—å–∫–æ –∫ `api-seller.uzum.uz`
- –ù–µ —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç —Ç–æ–∫–µ–Ω—ã –∏–ª–∏ –¥–∞–Ω–Ω—ã–µ
- –†–∞–±–æ—Ç–∞–µ—Ç –Ω–∞ –∑–∞—â–∏—â—ë–Ω–Ω–æ–π –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–µ Cloudflare

## üì¶ –î–µ–ø–ª–æ–π

–§–∞–π–ª—ã –≤ `/functions/` –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Ä–∞–∑–≤–æ—Ä–∞—á–∏–≤–∞—é—Ç—Å—è –∫–∞–∫ Cloudflare Functions –ø—Ä–∏ –ø—É—à–µ –≤ GitHub:

```bash
git add functions/
git commit -m "feat: Add Uzum API proxy to fix CORS"
git push
```

–ü–æ—Å–ª–µ –¥–µ–ø–ª–æ—è —Ñ—É–Ω–∫—Ü–∏—è –¥–æ—Å—Ç—É–ø–Ω–∞ –ø–æ URL:
```
https://your-site.pages.dev/api/uzum-proxy
```
